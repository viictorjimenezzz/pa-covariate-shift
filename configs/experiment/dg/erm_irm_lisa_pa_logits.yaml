# @package _global_

defaults:
  - ./dg/erm_irm_lisa_pa.yaml
  - /model/dg/net@data.dg.classifier # pass the net to the classifier

# Switch to logits dataloader and pass the classifier originally defined for the model
data:
  dg:
    _target_: src.data.diagvib_datamodules.DiagVibDataModulePAlogits # use logits dataloader instead
    classifier:
      _target_: src.models.components.dg_backbone.get_lm_model
      exp_name: ${exp_name}
      log_dir: ${paths.log_dir}

# Remove the classifier from the model instantiation, so that nn.Identity() is used
model:
  dg:
    classifier: null